{"version":3,"sources":["webpack:///src/app/pages/chat/chat.page.html","webpack:///src/app/pages/chat/chat-routing.module.ts","webpack:///src/app/pages/chat/chat.module.ts","webpack:///src/app/pages/chat/chat.page.scss","webpack:///src/app/pages/chat/chat.page.ts","webpack:///src/app/pages/chat/format-file-size.pipe.ts"],"names":["routes","path","component","ChatPageRoutingModule","imports","forChild","exports","ChatPageModule","declarations","ChatPage","chatService","router","newMsg","messages","getChatMessages","addChatMessage","then","content","scrollToBottom","logout","navigateByUrl","replaceUrl","event","file","item","type","split","console","log","isFileUploading","isFileUploaded","imgName","name","fileStoragePath","Date","getTime","imageRef","afStorage","ref","fileUploadTask","upload","percentageVal","percentageChanges","trackSnapshot","snapshotChanges","pipe","UploadedImageURL","getDownloadURL","subscribe","resp","storeFilesFirebase","filepath","size","imgSize","error","snap","totalBytes","image","fileId","afs","createId","filesCollection","doc","set","res","err","selector","template","FILE_SIZE_UNITS","FILE_SIZE_UNITS_LONG","FormatFileSizePipe","sizeInBytes","longForm","units","power","Math","round","min","length","pow","formattedSize","unit"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACKf,UAAMA,MAAM,GAAW,CACrB;AACEC,YAAI,EAAE,EADR;AAEEC,iBAAS,EAAE;AAFb,OADqB,CAAvB;;UAWaC,qBAAqB;AAAA;AAAA,O;;AAArBA,2BAAqB,6DAJjC,+DAAS;AACRC,eAAO,EAAE,CAAC,6DAAaC,QAAb,CAAsBL,MAAtB,CAAD,CADD;AAERM,eAAO,EAAE,CAAC,4DAAD;AAFD,OAAT,CAIiC,GAArBH,qBAAqB,CAArB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCIAI,cAAc;AAAA;AAAA,O;;AAAdA,oBAAc,6DAT1B,+DAAS;AACRH,eAAO,EAAE,CACP,4DADO,EAEP,0DAFO,EAGP,0DAHO,EAIP,0EAJO,CADD;AAORI,oBAAY,EAAE,CAAC,mDAAD,EAAU,yEAAV;AAPN,OAAT,CAS0B,GAAdD,cAAc,CAAd;;;;;;;;;;;;;;;;ACpBb;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCcFE,QAAQ;AAMnB,0BAAoBC,WAApB,EAAsDC,MAAtD,EAAsE;AAAA;;AAAlD,eAAAD,WAAA,GAAAA,WAAA;AAAkC,eAAAC,MAAA,GAAAA,MAAA;AAFtD,eAAAC,MAAA,GAAS,EAAT;AAGG;;AAPgB;AAAA;AAAA,qCASR;AACT,iBAAKC,QAAL,GAAgB,KAAKH,WAAL,CAAiBI,eAAjB,EAAhB;AACD;AAXkB;AAAA;AAAA,wCAaL;AAAA;;AACZ,iBAAKJ,WAAL,CAAiBK,cAAjB,CAAgC,KAAKH,MAArC,EAA6CI,IAA7C,CAAkD,YAAM;AACtD,mBAAI,CAACJ,MAAL,GAAc,EAAd;;AACA,mBAAI,CAACK,OAAL,CAAaC,cAAb;AACD,aAHD;AAID;AAlBkB;AAAA;AAAA,mCAoBV;AAAA;;AACP,iBAAKR,WAAL,CAAiBS,MAAjB,GAA0BH,IAA1B,CAA+B,YAAM;AACnC,oBAAI,CAACL,MAAL,CAAYS,aAAZ,CAA0B,GAA1B,EAA+B;AAAEC,0BAAU,EAAE;AAAd,eAA/B;AACD,aAFD;AAGD;AAxBkB;AAAA;AAAA,sCA0BPC,KA1BO,EA0BU;AAAA;;AAE3B,gBAAMC,IAAI,GAAGD,KAAK,CAACE,IAAN,CAAW,CAAX,CAAb,CAF2B,CAI3B;;AACA,gBAAID,IAAI,CAACE,IAAL,CAAUC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,MAA4B,OAAhC,EAAyC;AACvCC,qBAAO,CAACC,GAAR,CAAY,6BAAZ;AACA;AACD;;AAED,iBAAKlB,WAAL,CAAiBmB,eAAjB,GAAmC,IAAnC;AACA,iBAAKnB,WAAL,CAAiBoB,cAAjB,GAAkC,KAAlC;AAEA,iBAAKpB,WAAL,CAAiBqB,OAAjB,GAA2BR,IAAI,CAACS,IAAhC,CAb2B,CAe3B;;AACA,gBAAMC,eAAe,0BAAmB,IAAIC,IAAJ,GAAWC,OAAX,EAAnB,cAA2CZ,IAAI,CAACS,IAAhD,CAArB,CAhB2B,CAkB3B;;AACA,gBAAMI,QAAQ,GAAG,KAAK1B,WAAL,CAAiB2B,SAAjB,CAA2BC,GAA3B,CAA+BL,eAA/B,CAAjB,CAnB2B,CAqB3B;;AACA,iBAAKvB,WAAL,CAAiB6B,cAAjB,GAAkC,KAAK7B,WAAL,CAAiB2B,SAAjB,CAA2BG,MAA3B,CAAkCP,eAAlC,EAAmDV,IAAnD,CAAlC,CAtB2B,CAwB3B;;AACA,iBAAKb,WAAL,CAAiB+B,aAAjB,GAAiC,KAAK/B,WAAL,CAAiB6B,cAAjB,CAAgCG,iBAAhC,EAAjC;AACA,iBAAKhC,WAAL,CAAiBiC,aAAjB,GAAiC,KAAKjC,WAAL,CAAiB6B,cAAjB,CAAgCK,eAAhC,GAAkDC,IAAlD,CAE/B,gEAAS,YAAM;AACb;AACA,oBAAI,CAACnC,WAAL,CAAiBoC,gBAAjB,GAAoCV,QAAQ,CAACW,cAAT,EAApC;;AAEA,oBAAI,CAACrC,WAAL,CAAiBoC,gBAAjB,CAAkCE,SAAlC,CAA4C,UAAAC,IAAI,EAAE;AAChD,sBAAI,CAACC,kBAAL,CAAwB;AACtBlB,sBAAI,EAAET,IAAI,CAACS,IADW;AAEtBmB,0BAAQ,EAAEF,IAFY;AAGtBG,sBAAI,EAAE,MAAI,CAAC1C,WAAL,CAAiB2C;AAHD,iBAAxB;;AAKA,sBAAI,CAAC3C,WAAL,CAAiBmB,eAAjB,GAAmC,KAAnC;AACA,sBAAI,CAACnB,WAAL,CAAiBoB,cAAjB,GAAkC,IAAlC;AACD,eARD,EAQE,UAAAwB,KAAK,EAAE;AACP3B,uBAAO,CAACC,GAAR,CAAY0B,KAAZ;AACD,eAVD;AAWD,aAfD,CAF+B,EAkB/B,2DAAI,UAAAC,IAAI,EAAI;AACR,oBAAI,CAAC7C,WAAL,CAAiB2C,OAAjB,GAA2BE,IAAI,CAACC,UAAhC;AACH,aAFD,CAlB+B,CAAjC;AAsBH;AA1EoB;AAAA;AAAA,6CA6EFC,KA7EE,EA6Ec;AAC/B,gBAAMC,MAAM,GAAG,KAAKhD,WAAL,CAAiBiD,GAAjB,CAAqBC,QAArB,EAAf;AAEA,iBAAKlD,WAAL,CAAiBmD,eAAjB,CAAiCC,GAAjC,CAAqCJ,MAArC,EAA6CK,GAA7C,CAAiDN,KAAjD,EAAwDzC,IAAxD,CAA6D,UAAAgD,GAAG,EAAI;AAClErC,qBAAO,CAACC,GAAR,CAAYoC,GAAZ;AACD,aAFD,WAES,UAAAC,GAAG,EAAI;AACdtC,qBAAO,CAACC,GAAR,CAAYqC,GAAZ;AACD,aAJD;AAKH;AArFoB;;AAAA;AAAA,S;;;;gBAZZ;;gBACA;;;;;;gBAYN,uD;AAAS,iBAAC,yDAAD;;;AADCxD,cAAQ,6DALpB,gEAAU;AACTyD,gBAAQ,EAAE,UADD;AAETC,gBAAQ,EAAR;AAAA;AAAA,gGAFS;;;;AAAA,OAAV,CAKoB,GAAR1D,QAAQ,CAAR;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZb,UAAM2D,eAAe,GAAG,CAAC,GAAD,EAAM,IAAN,EAAY,IAAZ,EAAkB,IAAlB,EAAwB,IAAxB,EAA8B,IAA9B,EAAoC,IAApC,EAA0C,IAA1C,EAAgD,IAAhD,CAAxB;AACA,UAAMC,oBAAoB,GAAG,CAAC,OAAD,EAAU,WAAV,EAAuB,WAAvB,EAAoC,WAApC,EAAiD,YAAjD,EAA+D,UAA/D,EAA2E,YAA3E,EAAyF,YAAzF,CAA7B;;UAMaC,kBAAkB;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,oCACnBC,WADmB,EACEC,QADF,EACmB;AAC9C,gBAAMC,KAAK,GAAGD,QAAQ,GAClBH,oBADkB,GAElBD,eAFJ;AAGA,gBAAIM,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAAC/C,GAAL,CAAS2C,WAAT,IAAsBI,IAAI,CAAC/C,GAAL,CAAS,IAAT,CAAjC,CAAZ;AACD8C,iBAAK,GAAGC,IAAI,CAACE,GAAL,CAASH,KAAT,EAAgBD,KAAK,CAACK,MAAN,GAAe,CAA/B,CAAR;AACA,gBAAM1B,IAAI,GAAGmB,WAAW,GAAGI,IAAI,CAACI,GAAL,CAAS,IAAT,EAAeL,KAAf,CAA3B,CAN+C,CAMG;;AAClD,gBAAMM,aAAa,GAAGL,IAAI,CAACC,KAAL,CAAWxB,IAAI,GAAG,GAAlB,IAAyB,GAA/C,CAP+C,CAOK;;AACpD,gBAAM6B,IAAI,GAAGR,KAAK,CAACC,KAAD,CAAlB;AACA,6BAAUM,aAAV,cAA2BC,IAA3B;AACA;AAX4B;;AAAA;AAAA,S;;AAAlBX,wBAAkB,6DAJ9B,2DAAK;AACJtC,YAAI,EAAE;AADF,OAAL,CAI8B,GAAlBsC,kBAAkB,CAAlB","file":"pages-chat-chat-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-title>Chat</ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-button fill=\\\"clear\\\" (click)=\\\"logout()\\\">\\r\\n        <ion-icon name=\\\"log-out\\\" slot=\\\"icon-only\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content class=\\\"ion-padding\\\">\\r\\n<ion-grid>\\r\\n  <ion-row *ngFor=\\\"let message of messages | async\\\">\\r\\n    <ion-col size=\\\"9\\\" class=\\\"message\\\" [offset]=\\\"message.myMsg ? 3 : 0\\\"\\r\\n    [ngClass]=\\\"{ 'my-message': message.myMsg, 'other-message': !message.myMsg }\\\">\\r\\n    \\r\\n\\r\\n    <b>{{ message.fromName }}</b><br>\\r\\n    <div *ngIf=\\\"trackSnapshot | async as snap\\\">\\r\\n      File size: {{ snap.totalBytes | formatFileSize }} \\r\\n      Data transfered: {{ snap.bytesTransferred | formatFileSize }}\\r\\n    </div> \\r\\n    <span>{{ message.msg }}\\r\\n    </span>\\r\\n    <div class=\\\"time ion-text-right\\\"><br>{{ message.createdAt?.toMillis() | date:'short' }}</div>\\r\\n\\r\\n    </ion-col>\\r\\n  </ion-row>\\r\\n</ion-grid>\\r\\n</ion-content>\\r\\n\\r\\n\\r\\n<ion-footer>\\r\\n  <ion-toolbar color=\\\"light\\\">\\r\\n    <ion-row class=\\\"ion-align-items-center\\\">\\r\\n      <ion-col size=\\\"8\\\">\\r\\n        <ion-textarea autoGrow=\\\"true\\\" class=\\\"message-input\\\" rows=\\\"1\\\" maxLength=\\\"400\\\" [(ngModel)]=\\\"newMsg\\\" >\\r\\n        </ion-textarea>\\r\\n      </ion-col>\\r\\n      <ion-col size=\\\"2\\\" *ngIf=\\\"!isUploading && !isUploaded\\\">\\r\\n        <ion-button expand=\\\"block\\\" fill=\\\"clear\\\" color=\\\"primary\\\" [disabled]=\\\"newMsg === ''\\\"\\r\\n          class=\\\"msg-btn\\\">\\r\\n          <input type=\\\"file\\\" (change)=\\\"uploadImage($event.target.files)\\\" />\\r\\n          <ion-icon name=\\\"attach-outline\\\" slot=\\\"icon-only\\\"></ion-icon>\\r\\n        </ion-button>\\r\\n      </ion-col>\\r\\n      <ion-col size=\\\"2\\\">\\r\\n        <ion-button expand=\\\"block\\\" fill=\\\"clear\\\" color=\\\"primary\\\" [disabled]=\\\"newMsg === ''\\\"\\r\\n          class=\\\"msg-btn\\\" (click)=\\\"sendMessage()\\\">\\r\\n          <ion-icon name=\\\"send\\\" slot=\\\"icon-only\\\"></ion-icon>\\r\\n        </ion-button>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </ion-toolbar>\\r\\n</ion-footer>\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ChatPage } from './chat.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ChatPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ChatPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ChatPageRoutingModule } from './chat-routing.module';\r\n\r\nimport { ChatPage } from './chat.page';\r\nimport { FormatFileSizePipe } from './format-file-size.pipe';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ChatPageRoutingModule\r\n  ],\r\n  declarations: [ChatPage,FormatFileSizePipe]\r\n})\r\nexport class ChatPageModule {}\r\n","export default \".message-input {\\n  width: 100%;\\n  border: 1px solid var(--ion-color-medium);\\n  border-radius: 6px;\\n  background: #eee3e3;\\n  resize: none;\\n  margin-top: 0px;\\n  --padding-start: 8px;\\n}\\n\\n.message {\\n  padding: 10px !important;\\n  border-radius: 10px !important;\\n  margin-bottom: 4px !important;\\n  white-space: pre-wrap;\\n}\\n\\n.my-message {\\n  background: var(--ion-color-tertiary);\\n  color: #fff;\\n}\\n\\n.other-message {\\n  background: var(--ion-color-secondary);\\n  color: #fff;\\n}\\n\\n.time {\\n  color: #dfdfdf;\\n  float: right;\\n  font-size: small;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvY2hhdC9jaGF0LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFdBQUE7RUFDQSx5Q0FBQTtFQUNBLGtCQUFBO0VBQ0EsbUJBQUE7RUFDQSxZQUFBO0VBQ0EsZUFBQTtFQUNBLG9CQUFBO0FBQ0Y7O0FBRUE7RUFDRSx3QkFBQTtFQUNBLDhCQUFBO0VBQ0EsNkJBQUE7RUFDQSxxQkFBQTtBQUNGOztBQUVBO0VBQ0UscUNBQUE7RUFDQSxXQUFBO0FBQ0Y7O0FBRUE7RUFDRSxzQ0FBQTtFQUNBLFdBQUE7QUFDRjs7QUFFQTtFQUNFLGNBQUE7RUFDQSxZQUFBO0VBQ0EsZ0JBQUE7QUFDRiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2NoYXQvY2hhdC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubWVzc2FnZS1pbnB1dCB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0taW9uLWNvbG9yLW1lZGl1bSk7XHJcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xyXG4gIGJhY2tncm91bmQ6ICNlZWUzZTM7XHJcbiAgcmVzaXplOiBub25lO1xyXG4gIG1hcmdpbi10b3A6IDBweDtcclxuICAtLXBhZGRpbmctc3RhcnQ6IDhweDtcclxufVxyXG5cclxuLm1lc3NhZ2Uge1xyXG4gIHBhZGRpbmc6IDEwcHggIWltcG9ydGFudDtcclxuICBib3JkZXItcmFkaXVzOiAxMHB4ICFpbXBvcnRhbnQ7XHJcbiAgbWFyZ2luLWJvdHRvbTogNHB4ICFpbXBvcnRhbnQ7XHJcbiAgd2hpdGUtc3BhY2U6IHByZS13cmFwO1xyXG59XHJcblxyXG4ubXktbWVzc2FnZSB7XHJcbiAgYmFja2dyb3VuZDogdmFyKC0taW9uLWNvbG9yLXRlcnRpYXJ5KTtcclxuICBjb2xvcjogI2ZmZjtcclxufVxyXG5cclxuLm90aGVyLW1lc3NhZ2Uge1xyXG4gIGJhY2tncm91bmQ6IHZhcigtLWlvbi1jb2xvci1zZWNvbmRhcnkpO1xyXG4gIGNvbG9yOiAjZmZmO1xyXG59XHJcblxyXG4udGltZSB7XHJcbiAgY29sb3I6ICNkZmRmZGY7XHJcbiAgZmxvYXQ6IHJpZ2h0O1xyXG4gIGZvbnQtc2l6ZTogc21hbGw7XHJcbn1cclxuIl19 */\";","import { Message } from './../../services/chat.service';\r\nimport { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { ChatService } from '../../services/chat.service';\r\nimport { Router } from '@angular/router';\r\nimport { IonContent } from '@ionic/angular';\r\nimport { Observable } from 'rxjs';\r\nimport { finalize, tap } from 'rxjs/operators';\r\nimport { imgFile } from './../../services/chat.service';\r\n\r\n@Component({\r\n  selector: 'app-chat',\r\n  templateUrl: './chat.page.html',\r\n  styleUrls: ['./chat.page.scss'],\r\n})\r\nexport class ChatPage implements OnInit {\r\n  @ViewChild(IonContent) content: IonContent;\r\n \r\n  messages: Observable<Message[]>;\r\n  newMsg = '';\r\n  \r\n  constructor(private chatService: ChatService, private router: Router) \r\n  { }\r\n\r\n  ngOnInit() {\r\n    this.messages = this.chatService.getChatMessages();\r\n  }\r\n\r\n  sendMessage() {\r\n    this.chatService.addChatMessage(this.newMsg).then(() => {\r\n      this.newMsg = '';\r\n      this.content.scrollToBottom();\r\n    });\r\n  }\r\n\r\n  logout() {\r\n    this.chatService.logout().then(() => {\r\n      this.router.navigateByUrl('/', { replaceUrl: true });\r\n    });\r\n  }\r\n\r\n  uploadImage(event: FileList) {\r\n      \r\n    const file = event.item(0)\r\n\r\n    // Image validation\r\n    if (file.type.split('/')[0] !== 'image') { \r\n      console.log('File type is not supported!')\r\n      return;\r\n    }\r\n\r\n    this.chatService.isFileUploading = true;\r\n    this.chatService.isFileUploaded = false;\r\n\r\n    this.chatService.imgName = file.name;\r\n\r\n    // Storage path\r\n    const fileStoragePath = `filesStorage/${new Date().getTime()}_${file.name}`;\r\n\r\n    // Image reference\r\n    const imageRef = this.chatService.afStorage.ref(fileStoragePath);\r\n\r\n    // File upload task\r\n    this.chatService.fileUploadTask = this.chatService.afStorage.upload(fileStoragePath, file);\r\n\r\n    // Show uploading progress\r\n    this.chatService.percentageVal = this.chatService.fileUploadTask.percentageChanges();\r\n    this.chatService.trackSnapshot = this.chatService.fileUploadTask.snapshotChanges().pipe(\r\n      \r\n      finalize(() => {\r\n        // Retreive uploaded image storage path\r\n        this.chatService.UploadedImageURL = imageRef.getDownloadURL();\r\n        \r\n        this.chatService.UploadedImageURL.subscribe(resp=>{\r\n          this.storeFilesFirebase({\r\n            name: file.name,\r\n            filepath: resp,\r\n            size: this.chatService.imgSize\r\n          });\r\n          this.chatService.isFileUploading = false;\r\n          this.chatService.isFileUploaded = true;\r\n        },error=>{\r\n          console.log(error);\r\n        })\r\n      }),\r\n      tap(snap => {\r\n          this.chatService.imgSize = snap.totalBytes;\r\n      })\r\n    )\r\n}\r\n\r\n\r\nstoreFilesFirebase(image: imgFile) {\r\n    const fileId = this.chatService.afs.createId();\r\n    \r\n    this.chatService.filesCollection.doc(fileId).set(image).then(res => {\r\n      console.log(res);\r\n    }).catch(err => {\r\n      console.log(err);\r\n    });\r\n}\r\n\r\n}\r\n","import {Pipe, PipeTransform} from '@angular/core';\n\nconst FILE_SIZE_UNITS = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\nconst FILE_SIZE_UNITS_LONG = ['Bytes', 'Kilobytes', 'Megabytes', 'Gigabytes', 'Pettabytes', 'Exabytes', 'Zettabytes', 'Yottabytes'];\n\n@Pipe({\n  name: 'formatFileSize'\n})\n\nexport class FormatFileSizePipe implements PipeTransform {\n  transform(sizeInBytes: number, longForm: boolean): string {\n    const units = longForm\n      ? FILE_SIZE_UNITS_LONG\n      : FILE_SIZE_UNITS;\n    let power = Math.round(Math.log(sizeInBytes)/Math.log(1024));\n  \tpower = Math.min(power, units.length - 1);\n  \tconst size = sizeInBytes / Math.pow(1024, power); // size in new units\n  \tconst formattedSize = Math.round(size * 100) / 100; // keep up to 2 decimals\n  \tconst unit = units[power];\n  \treturn `${formattedSize} ${unit}`;\n  }\n}\n"]}